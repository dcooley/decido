<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bindings for 'Mapbox' Ear Cutting Triangulation Library  • decido</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">decido</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->

<div id="decido" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#decido" class="anchor"></a>decido</h1></div>
<p>The goal of decido is to provide an R binding to the Mapbox library <a href="https://github.com/mapbox/earcut.hpp">earcut.hpp</a> for constrained polygon triangulation.</p>
<p>Ear cutting (or ear clipping) applies constrained triangulation by successively ‘cutting’ triangles from a polygon defined by path/s. Holes are supported, the earcut library works with single-island-with-holes form polygons, analogous to the POLYGON type in simple features.</p>
<p>This augments the Javascript version available in <a href="https://github.com/hypertidy/rearcut.git">rearcut</a> (also an R wrapper of the JS version by Mapbox). No comparison or testing has yet been done to compare these implementations.</p>
<p>In comparison to path-based ear-clipping, other libraries ‘Triangle’ and ‘CGAL’ provide edge-based <em>mostly Delaunay</em> triangulation. The Triangle library is available in the R package <a href="https://CRAN.r-project.org/package=RTriangle">RTriangle</a>. Experimental implementations binding CGAL are in <a href="https://github.com/s-u/rcgal">rcgal</a> and <a href="https://github.com/hypertidy/laridae">laridae</a>.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install decido from with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"hypertidy/decido"</span>)</code></pre></div>
</div>
<div id="development" class="section level2">
<h2 class="hasAnchor">
<a href="#development" class="anchor"></a>Development</h2>
<p>Immediate needs:</p>
<ul>
<li>clean up ability to specify holes</li>
<li>wrap around complex types of multiple polygons, etc.</li>
<li>tests!</li>
</ul>
<p>See <a href="https://github.com/hypertidy/rearcut.git">rearcut</a> for some approaches to the hole encoding. It’s not hard, just rife with options. At the moment it seems best to stick close to how the JS earcut encodes them, and this translates very simply in C++.</p>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>This is a basic example of triangulating a single-ring polygon. The output is a vector of triplet indices defining each triangle.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(decido)
x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.75</span>, <span class="dv">1</span>, <span class="fl">0.5</span>, <span class="fl">0.8</span>, <span class="fl">0.69</span>)
y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="fl">0.8</span>, <span class="fl">0.7</span>, <span class="fl">0.6</span>, <span class="dv">0</span>)
<span class="kw"><a href="reference/earcut.html">earcut</a></span>(x, y)
<span class="co">#&gt;  [1] 1 0 6 6 5 4 4 3 2 1 6 4 4 2 1</span>


<span class="kw">plot</span>(x, y)
<span class="kw">polygon</span>(x, y, <span class="dt">lwd =</span> <span class="dv">10</span>)
<span class="kw">apply</span>(<span class="kw">matrix</span>(<span class="kw"><a href="reference/earcut.html">earcut</a></span>(x, y), <span class="dt">nrow =</span> <span class="dv">3</span>), <span class="dv">2</span>, <span class="cf">function</span>(ind) <span class="kw">polygon</span>(<span class="kw">cbind</span>(x, y)[ind <span class="op">+</span><span class="st"> </span><span class="dv">1</span>, ], <span class="dt">col =</span> <span class="st">"firebrick"</span>))</code></pre></div>
<p><img src="reference/figures/README-example-1.png" width="100%"></p>
<pre><code>#&gt; NULL</code></pre>
<p>Support for holes is provided by two required arguments <code>numholes</code> and <code>holes</code>. The holes are the starting index of each hole, here in C++ 0-based convention.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## hole starts at 9
x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.75</span>, <span class="dv">1</span>, <span class="fl">0.5</span>, <span class="fl">0.8</span>, <span class="fl">0.69</span>, <span class="dv">0</span>, <span class="fl">0.2</span>,
      <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.3</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>)
y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="fl">0.8</span>, <span class="fl">0.7</span>, <span class="fl">0.6</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.2</span>,
      <span class="fl">0.2</span>, <span class="fl">0.4</span>, <span class="fl">0.6</span>, <span class="fl">0.4</span>, <span class="fl">0.2</span>)
ind &lt;-<span class="st"> </span><span class="kw"><a href="reference/earcut.html">earcut</a></span>(x, y, <span class="dt">holes =</span> <span class="dv">8</span>, <span class="dt">numholes =</span> <span class="dv">1</span>)
<span class="kw">plot</span>(x, y, <span class="dt">asp =</span> <span class="dv">1</span>)

xy &lt;-<span class="st"> </span><span class="kw">cbind</span>(x, y)
<span class="kw">apply</span>(<span class="kw">matrix</span>(ind, <span class="dv">3</span>), <span class="dv">2</span>, <span class="cf">function</span>(i) <span class="kw">polygon</span>(xy[i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>, ]))</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-1-1.png" width="100%"></p>
<pre><code>#&gt; NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(oz)
oz_ring &lt;-<span class="st"> </span>oz<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/oz/topics/oz">ozRegion</a></span>(<span class="dt">states =</span> <span class="ot">FALSE</span>)
ring &lt;-<span class="st"> </span>oz_ring<span class="op">$</span>lines[[<span class="dv">6</span>]]
<span class="kw">plot</span>(ring, <span class="dt">pch =</span> <span class="st">"."</span>, <span class="dt">asp =</span> <span class="dv">1</span><span class="op">/</span><span class="kw">cos</span>(<span class="dv">42</span> <span class="op">*</span><span class="st"> </span>pi<span class="op">/</span><span class="dv">180</span>))
indices &lt;-<span class="st"> </span><span class="kw"><a href="reference/earcut.html">earcut</a></span>(ring<span class="op">$</span>x, ring<span class="op">$</span>y)
xy &lt;-<span class="st"> </span><span class="kw">cbind</span>(ring<span class="op">$</span>x, ring<span class="op">$</span>y)
<span class="kw">apply</span>(<span class="kw">matrix</span>(indices, <span class="dt">nrow =</span> <span class="dv">3</span>), <span class="dv">2</span>, <span class="cf">function</span>(ind) <span class="kw">polygon</span>(xy[ind <span class="op">+</span><span class="st"> </span><span class="dv">1</span>, ]))</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-2-1.png" width="100%"></p>
<pre><code>#&gt; NULL</code></pre>
</div>
<div id="performance" class="section level2">
<h2 class="hasAnchor">
<a href="#performance" class="anchor"></a>Performance</h2>
<p>Compare timing of C++ versus JS implementations.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"> rbenchmark<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/rbenchmark/topics/benchmark">benchmark</a></span>(rearcut<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/rearcut/topics/earcut">earcut</a></span>(<span class="kw">cbind</span>(ring<span class="op">$</span>x, ring<span class="op">$</span>y)), decido<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/decido/topics/earcut">earcut</a></span>(ring<span class="op">$</span>x, ring<span class="op">$</span>y))
                                    test replications elapsed relative
<span class="co">#2     decido::earcut(ring$x, ring$y)          100   0.064    1.000</span>
<span class="co">#1 rearcut::earcut(cbind(ring$x, ring$y))          100   4.147   64.797</span></code></pre></div>
</div>
<div id="beware" class="section level2">
<h2 class="hasAnchor">
<a href="#beware" class="anchor"></a>Beware!</h2>
<p>This is in active development and the functions will change.</p>
<p>No checking is done on input coordinates, so use at your own risk!</p>
<hr>
<p>Please note that this project is released with a <a href="CODE_OF_CONDUCT.md">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2 class="hasAnchor">
<a href="#sidebar" class="anchor"></a>License</h2>
<p><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Michael Sumner <br><small class="roles"> Author, maintainer </small> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#maturing"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="lifecycle"></a></li>
<li><a href="https://travis-ci.org/hypertidy/decido"><img src="http://badges.herokuapp.com/travis/hypertidy/decido?branch=master&amp;env=BUILD_NAME=trusty_release&amp;label=linux" alt="Travis-CI Build Status"></a></li>
<li><a href="https://travis-ci.org/hypertidy/decido"><img src="http://badges.herokuapp.com/travis/hypertidy/decido?branch=master&amp;env=BUILD_NAME=osx_release&amp;label=osx" alt="Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/mdsumner/decido"><img src="https://ci.appveyor.com/api/projects/status/github/hypertidy/decido?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://codecov.io/github/hypertidy/decido?branch=master"><img src="https://codecov.io/gh/hypertidy/decido/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
<li><a href="https://cran.r-project.org/package=tidync"><img src="http://www.r-pkg.org/badges/version/tidync" alt="CRAN_Status_Badge"></a></li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Michael Sumner.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
